# 作用域与作用域链

首先说明：

**JavaScript同绝大多数语言一样，使用的是词法作用域，即静态作用域。**

词法作用域的特点是，变量的作用域在静态编译阶段就完成了，而不是在运行期间。

## 作用域

```js
function func() {
  var a = 1
  console.log(a)
}

func()
```

作用域一般指代码中使用大括号 `{}` 括起来的区域，如上代码中，有两个作用域：全局作用域和 `func` 函数作用域，我们以 `func` 函数作用域为例：

在这个函数作用域中，定义了变量 `a` ，这个定义在编译期间就确定了。

当 `func` 函数执行时，会从 `func` 的函数作用域中查找变量 `a` ，如果 `a` 在函数中定义了，就直接使用，如果没有找到，就到父作用域中继续查找。

## 作用域链

```js
function func() {
  var a = 1
  function funcInner() {
    console.log(a)
  }
  funcInner()
}

func()
```

在这个例子中，`funcInner` 函数作用域中没有定义任何变量，当执行 `console.log(a)` 时，由于没有查找到变量 `a` ，会继续在父级作用域中查找，因此找到了 `func` 函数作用域中，该函数作用域找到了变量 `a` ，因此查找成功。

从子作用域一直往父级作用域查找所形成的链，称为作用域链。直到查找到全局作用域时，走到链的末端，查找过程结束。

## 作用域的类型

在JavaScript中，有四种类型的作用域：

- 全局作用域：根作用域，代码一般是从全局作用域开始执行的
- 函数作用域：函数区块所包含的区域
- 块级作用域：在ES6以后，由于 `let/const` 提升的范围变窄了（以往 `var` 声明会提升至函数作用域的顶部），变成了提升至 `{}` 的顶部，从而多出了块级作用域
- eval作用域：使用 `eval` 运行的代码会在一个特殊的作用域内，该作用域是动态创建的

## 闭包

<Todo />

## 常见问题

<Todo />

